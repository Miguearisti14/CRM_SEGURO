{% extends 'layout_panel.html' %}
{% load static %}

{% block title %}Detalle de Reclamaci√≥n - ZuluAris CRM{% endblock %}

{% block content %}
<section class="detalle-cliente-container">
    <div class="detalle-cliente-card">
        <h2 class="titulo-seccion">Detalle de la Reclamaci√≥n</h2>
        <p class="descripcion-seccion">
            Consulta la informaci√≥n completa de la reclamaci√≥n registrada por el cliente.
        </p>

        <!-- üìÑ Informaci√≥n de la reclamaci√≥n -->
        <div class="poliza-card">
            <h3>Datos de la Reclamaci√≥n</h3>
            <p><strong>N¬∞ Reclamaci√≥n:</strong> {{ reclamacion.id }}</p>
            <p><strong>Fecha:</strong> {{ reclamacion.fecha }}</p>
            <p><strong>Estado:</strong> 
                <span class="estado-tag estado-{{ reclamacion.id_estado.descripcion|lower }}">
                    {{ reclamacion.id_estado.descripcion }}
                </span>
            </p>
            <p><strong>Descripci√≥n: </strong>{{ reclamacion.descripcion|default:"Sin descripci√≥n" }}</p>
            
        </div>
        
        <!-- üßæ Informaci√≥n del cliente -->
        <div class="poliza-card">
            <h3>Informaci√≥n del Cliente</h3>
            <p><strong>Nombre:</strong> {{ cliente.nombre }}</p>
            <p><strong>DNI:</strong> {{ cliente.dni }}</p>
            <p><strong>Correo:</strong> {{ cliente.correo|default:"No especificado" }}</p>
        </div>

        

        <!-- üì¶ Informaci√≥n de la p√≥liza asociada -->
        {% if poliza %}
        <div class="poliza-card">
            <h3>P√≥liza Asociada</h3>
            <p><strong>Producto:</strong> {{ poliza.id_producto.descripcion }}</p>
            <p><strong>Tipo de p√≥liza:</strong> {{ poliza.id_tipo_poliza.descripcion }}</p>
            <p><strong>Vigencia:</strong> {{ poliza.fecha_inicio }} ‚Üí {{ poliza.fecha_fin }}</p>
        </div>
        {% endif %}

        <!-- üîß Acciones -->

        <div class="acciones-formulario">
                <a href="{% url 'cambiar_estado_reclamacion' reclamacion.id %}" class="btn-guardar">
                    Cambiar estado
                </a>

                <a href="{% url 'reclamaciones' %}" class="btn-cancelar">Volver</a>
            </div>
            
            <form method="POST" action="{% url 'eliminar_reclamacion' reclamacion.id %}" 
                  onsubmit="return confirm('¬øSeguro que deseas eliminar esta reclamaci√≥n?')">
                {% csrf_token %}
                <div class="acciones-formulario eliminar">
                    <button type="submit" class="btn-eliminar">Eliminar</button>
                </div>
            </form>

            
    </div>
</section>
{% endblock %}
